<!DOCTYPE html>
<html>
<head>
    <!--
    * Author:         Moonsea
    -->
    <meta charset="utf-8" />
    <title>Ecshop 开发问题汇总 | Moonsea's Blog</title>
    <meta name="author" content="Moonsea" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Moonsea's Blog" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="https://help.github.com/assets/images/site/favicon.ico" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>

    <!-- mathjax config similar to math.stackexchange -->

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
          }
        });
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

    <script type="text/javascript"
       src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>


</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">Moonsea</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="https://github.com/moonsea/" target="_blank" style="margin-left:-5px;"><img src="https://www.icinga.org/wp-content/uploads/2014/07/github_logo.png" alt="" width="25"/></a>
            <a href="http://www.cnblogs.com/moonseazj/" target="_blank" style="margin-left:5px;"><img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQpVif04zTTXD3oM8ZSWaJUfxVoiZMb2C9gQQxpdq4AsRxOiU08" alt="" width="25"/></a>
            <a href="Mailto:seainsight@126.com" target="_blank" style="margin-left:5px;"><img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTgzheMdNlWeo7lx4-Tj95yGSJ9bHbSasD8A3BIiMFTutf2SasVaQ" alt="" width="25"/></a>
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/Ecshop-Problems" title="Ecshop 开发问题汇总">Ecshop 开发问题汇总</a></h1>
        <p class="entry-date">2016-04-05</p>
        <h2 id="section">写在前面</h2>

<p>本文记录在Ecshop开发和使用过程中遇到的各种问题以及解决方法</p>

<h2 id="gdversion">安装时提示：<code class="highlighter-rouge">gd_version()</code></h2>

<p>找到install/includes/lib_installer.php中的第31行<code class="highlighter-rouge">return ls_image::gd_version();</code>然后在找到include/cls_image.php中的678行，发现<code class="highlighter-rouge">gd_version()</code>方法未声明静态static，所以会出错</p>

<p>问题： 安装Ecshop时，出现错误提示信息<code class="highlighter-rouge">Strict Standards: Non-static method cls_image::gd_version() should not be called statically</code>
<img src="/images/ecshopproblems/16-04-05-1-gd-version.JPG" alt="Gd-Version" /></p>

<p>方案： 下面两种方法选择一种即可</p>

<ul>
  <li>将function gd_version()改成static function gd_version()即可</li>
  <li>或者将install/includes/lib_installer.php中的第31行return cls_image::gd_version();改成：</li>
</ul>

<blockquote>
  <p>$p = new cls_image();
   return $p-&gt;gd_version();</p>
</blockquote>

<h2 id="jepg">JEPG显示不支持</h2>

<p>查看发现有libjpeg.lib库，GD2库也有，都加载了，也都正常。查看ecshop源代码发现install/includes/lib_installer.php中第98行,JPEG写成了JPG</p>

<p>问题： 环境检测显示JEPG不支持
<img src="/images/ecshopproblems/16-04-05-2-jepg-unsuport.JPG" alt="jpeg-unsupport" /></p>

<p>方案：将第98行代码改成如下形式</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$jpeg_enabled = ($gd_info['JPEG Support']        === true) ? $_LANG['support'] : $_LANG['not_support'];
</code></pre>
</div>

<h2 id="pregreplace">错误警告<code class="highlighter-rouge">preg_replace()</code></h2>

<p>安装Ecshop完成之后，访问前台页面，会提示警告信息<code class="highlighter-rouge"> Deprecated: preg_replace(): The /e modifier is deprecated</code></p>

<p>问题： 错误警告<code class="highlighter-rouge"> Deprecated: preg_replace(): The /e modifier is deprecated</code>
<img src="/images/ecshopproblems/16-04-05-3-preg-replace.JPG" alt="Preg-Replace" /></p>

<p>方案： 打开<code class="highlighter-rouge">includes\cls_template.php</code>,跳转到第<code class="highlighter-rouge">300</code>行，将</p>

<div class="highlighter-rouge"><pre class="highlight"><code>return preg_replace("/{([^\}\{\n]*)}/e", "\$this-&gt;select('\\1');", $source);
</code></pre>
</div>

<p>替换成</p>

<div class="highlighter-rouge"><pre class="highlight"><code>return preg_replace_callback("/{([^\}\{\n]*)}/", function($r) { return $this-&gt;select($r[1]); }, $source);
</code></pre>
</div>

<p>重新访问页面就解决了</p>

<h2 id="only-variables">错误警告：<code class="highlighter-rouge">Only variables</code></h2>

<p>安装完成之后，访问前台首台，出现警告信息<code class="highlighter-rouge">Strict standards: Only variables should be passed by reference</code></p>

<p>问题：错误警告<code class="highlighter-rouge">Strict standards: Only variables should be passed by reference</code>
<img src="/images/ecshopproblems/16-04-05-4-only-variable.JPG" alt="Only-Variable" /></p>

<p>方案：PHP 5.3以上版本的问题，和配置有关.只要<code class="highlighter-rouge">includes\cls_template.php</code>第<code class="highlighter-rouge">418</code>行</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$tag_sel = array_shift(explode(' ', $tag));
</code></pre>
</div>

<p>拆成两句就没有问题了</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$tag_arr = explode(' ', $tag);
$tag_sel = array_shift($tag_arr);
</code></pre>
</div>

<p>或者直接修改PHP配置文件<code class="highlighter-rouge">php.ini</code>第<code class="highlighter-rouge">451</code>行，将</p>

<div class="highlighter-rouge"><pre class="highlight"><code>error_reporting = E_ALL
</code></pre>
</div>

<p>改成</p>

<div class="highlighter-rouge"><pre class="highlight"><code>error_reporting = E_ALL
</code></pre>
</div>

<p>重新启动服务即可</p>

<h2 id="ecshopmktime">Ecshop后台<code class="highlighter-rouge">mktime()</code>错误警告</h2>

<p>安装完成之后，登录系统后台访问“商店设置”时，系统报错，提示<code class="highlighter-rouge">mktime(): You should be using the time() function instead in</code>.这是因为PHP版本的问题，<code class="highlighter-rouge">mktime()</code>不带参数被调用时，会被提示错误.</p>

<p>问题：错误警告<code class="highlighter-rouge">mktime(): You should be using the time() function instead in</code>
<img src="/images/ecshopproblems/16-04-05-5-mktime.JPG" alt="Mktime" /></p>

<p>方案：根据错误提示找到相应错误所在的文件，并且定位到问题代码，将</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$auth = mktime();
</code></pre>
</div>

<p>替换成</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$auth = time();
</code></pre>
</div>

<p>刷新页面就可以了</p>

<h2 id="section-1">后台管理各页面功能备注</h2>

<h5 id="htm"><em>htm</em></h5>
<hr />
<p><code class="highlighter-rouge">templates/index.htm</code>：后台主界面，通过<code class="highlighter-rouge">&lt;frameset&gt;&lt;/frameset&gt;</code>来实现页面分块</p>

<h5 id="php"><em>php</em></h5>
<hr />
<p><code class="highlighter-rouge">common.php</code>:后台基本显示语言</p>

<h2 id="section-2">数据库修改记录和使用说明</h2>

<h5 id="goods"><em>goods</em>表</h5>
<hr />

<p><code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">unit</code>字段作为商品单位<br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_bar_code</code>字段作为<code class="highlighter-rouge">商品条形码</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_max_buy</code>字段作为<code class="highlighter-rouge">限购数量</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_min_buy</code>字段作为<code class="highlighter-rouge">最低购买量</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_bind_type</code>字段作为<code class="highlighter-rouge">装订类型</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_composite_page</code>字段作为<code class="highlighter-rouge">合成图片格式</code>:0:单页,1:跨页<br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_composite_pic</code>字段作为<code class="highlighter-rouge">合成图片格式</code>:0:jpg,1:png<br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_gray</code>字段作为<code class="highlighter-rouge">灰度特效</code>:0:不启用,1:启用<br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_composite_pdf</code>字段作为<code class="highlighter-rouge">合并为pdf</code>:0:否,1:是<br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_album</code>字段作为<code class="highlighter-rouge">画册选项</code>:0:硬壳,1:软壳，2:皮革<br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_add_page_start</code>字段作为<code class="highlighter-rouge">起始页数</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_add_page_max</code>字段作为<code class="highlighter-rouge">最大页数</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_add_page_unit</code>字段作为<code class="highlighter-rouge">加页单位</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">is_text_on</code>字段作为<code class="highlighter-rouge">开启文本</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">is_pic</code>字段作为<code class="highlighter-rouge">开启用户图片</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">is_background</code>字段作为<code class="highlighter-rouge">开启背景</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">is_gif</code>字段作为<code class="highlighter-rouge">开启剪贴画</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">is_border</code>字段作为<code class="highlighter-rouge">开启边框</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">is_mask</code>字段作为<code class="highlighter-rouge">开启蒙版</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">is_format</code>字段作为<code class="highlighter-rouge">开启版式</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">is_textvr</code>字段作为<code class="highlighter-rouge">开启竖排文字</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_line_min</code>字段作为<code class="highlighter-rouge">最小行距</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_line_max</code>字段作为<code class="highlighter-rouge">最大行距</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_line_up_unit</code>字段作为<code class="highlighter-rouge">行距递增单位</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_defination</code>字段作为<code class="highlighter-rouge">分辨率</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_inner_width</code>字段作为<code class="highlighter-rouge">内页设计宽度</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_inner_height</code>字段作为<code class="highlighter-rouge">内页设计高度</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_blood_h</code>字段作为<code class="highlighter-rouge">普通页水平出血</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_blood_v</code>字段作为<code class="highlighter-rouge">普通页垂直出血</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_safe_line</code>字段作为<code class="highlighter-rouge">安全线</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_inner_type</code>字段作为<code class="highlighter-rouge">内页材质</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_size_width</code>字段作为<code class="highlighter-rouge">尺寸-宽</code><br />
<code class="highlighter-rouge">goods</code>: 添加<code class="highlighter-rouge">goods_size_length</code>字段作为<code class="highlighter-rouge">尺寸-长</code></p>

<h4 id="section-3">2016-04-28整理商品（规格）管理所需要字段</h4>
<hr />

<p><code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_id</code>字段作为<code class="highlighter-rouge">商品id</code><br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_sn</code>字段作为<code class="highlighter-rouge">商品编号</code><br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_name</code>字段作为<code class="highlighter-rouge">商品名称</code><br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_brief</code>字段作为<code class="highlighter-rouge">商品简介</code><br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_bind_type</code>字段作为<code class="highlighter-rouge">装订类型</code>:取自<code class="highlighter-rouge">goods_bind_type</code>表<br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">shop_price</code>字段作为<code class="highlighter-rouge">商品价格</code><br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_thumb</code>字段作为<code class="highlighter-rouge">商品相册</code><br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_add_page_max</code>字段作为<code class="highlighter-rouge">商品最大页数</code><br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_composite_page</code>字段作为<code class="highlighter-rouge">合成图片格式</code>:0:单页,1:跨页<br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_composite_pic</code>字段作为<code class="highlighter-rouge">合成图片格式</code>:0:jpg,1:png<br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_gray</code>字段作为<code class="highlighter-rouge">灰度特效</code>:0:不启用,1:启用<br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_composite_pdf</code>字段作为<code class="highlighter-rouge">合并为pdf</code>:0:不启用,1:启用<br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_inner_type</code>字段作为<code class="highlighter-rouge">内页材质</code>：取自<code class="highlighter-rouge">material_type</code>表<br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_size_width</code>字段作为<code class="highlighter-rouge">尺寸-宽</code><br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">goods_size_length</code>字段作为<code class="highlighter-rouge">尺寸-长</code><br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">add_time</code>字段作为<code class="highlighter-rouge">商品添加时间</code><br />
<code class="highlighter-rouge">goods</code>:<code class="highlighter-rouge">last_update</code>字段作为<code class="highlighter-rouge">最后更新时间</code></p>

<h5 id="ecsgoodsbindtype"><em>ecs_goods_bind_type</em>表</h5>
<hr />

<p>新建<code class="highlighter-rouge">ecs_goods_bind_type</code>表<code class="highlighter-rouge">装订类型表</code></p>

<blockquote>
  <p>type_id:类型id<br />
type_name：类型名称</p>
</blockquote>

<h5 id="ecsmaterialtype"><em>ecs_material_type</em>表</h5>
<hr />

<p>新建<code class="highlighter-rouge">ecs_material_type</code>表<code class="highlighter-rouge">材质类型表</code></p>

<blockquote>
  <p>type_id:类型id<br />
type_name：类型名称<br />
remark：备注</p>
</blockquote>

<h5 id="adminuser"><em>admin_user</em>表</h5>
<hr />

<p><code class="highlighter-rouge">admin_user</code>: 添加<code class="highlighter-rouge">invitation_code</code>字段作为<code class="highlighter-rouge">邀请码</code><br />
<code class="highlighter-rouge">admin_user</code>: 添加<code class="highlighter-rouge">phone</code>字段作为<code class="highlighter-rouge">手机号码</code><br />
<code class="highlighter-rouge">admin_user</code>: 添加<code class="highlighter-rouge">company</code>字段作为<code class="highlighter-rouge">所属部门</code><br />
<code class="highlighter-rouge">admin_user</code>: 添加<code class="highlighter-rouge">bank_card</code>字段作为<code class="highlighter-rouge">银行卡号</code></p>

<h5 id="orderinfo"><em>order_info</em>表</h5>
<hr />

<p><code class="highlighter-rouge">order_info</code>:添加<code class="highlighter-rouge">invitation_code</code>字段作为<code class="highlighter-rouge">邀请码</code><br />
<code class="highlighter-rouge">order_info</code>:<code class="highlighter-rouge">order_status</code>字段作为<code class="highlighter-rouge">印刷厂是否处理</code>:<code class="highlighter-rouge">0</code>:未确认，<code class="highlighter-rouge">1</code>：已确认<br />
<code class="highlighter-rouge">order_info</code>:添加<code class="highlighter-rouge">print_status</code>字段作为<code class="highlighter-rouge">印刷厂订单是否打印</code>:<code class="highlighter-rouge">0</code>:未打印订单，<code class="highlighter-rouge">1</code>：已打印订单<br />
<code class="highlighter-rouge">order_info</code>:添加<code class="highlighter-rouge">download_status</code>字段作为<code class="highlighter-rouge">印刷厂订单是否下载</code>:<code class="highlighter-rouge">0</code>:未下载订单，<code class="highlighter-rouge">1</code>：已下载订单<br />
<code class="highlighter-rouge">order_info</code>:<code class="highlighter-rouge">pay_status</code>字段作为<code class="highlighter-rouge">用户付款状态</code>:<code class="highlighter-rouge">0</code>:未付款:<code class="highlighter-rouge">2</code>：已付款<br />
<code class="highlighter-rouge">order_info</code>:<code class="highlighter-rouge">user_id</code>字段作为<code class="highlighter-rouge">用户名称</code>:用户下单时存入当前登录用户名称
<code class="highlighter-rouge">order_info</code>:<code class="highlighter-rouge">invoice_no</code>字段作为<code class="highlighter-rouge">快递单号</code><br />
<code class="highlighter-rouge">order_info</code>:<code class="highlighter-rouge">user_name</code>字段作为<code class="highlighter-rouge">下单用户姓名</code>:用户下单时写入</p>

<h5 id="ordergoods"><em>order_goods</em>表</h5>
<hr />

<p><code class="highlighter-rouge">order_goods</code>:添加<code class="highlighter-rouge">bind_type</code>字段作为<code class="highlighter-rouge">装订类型</code><br />
<code class="highlighter-rouge">order_goods</code>:添加<code class="highlighter-rouge">material_type</code>字段作为<code class="highlighter-rouge">材质</code><br />
<code class="highlighter-rouge">order_goods</code>:添加<code class="highlighter-rouge">goods_height</code>字段作为<code class="highlighter-rouge">尺寸-长</code><br />
<code class="highlighter-rouge">order_goods</code>:添加<code class="highlighter-rouge">goods_width</code>字段作为<code class="highlighter-rouge">尺寸-宽</code><br />
<code class="highlighter-rouge">order_goods</code>:添加<code class="highlighter-rouge">goods_page_count</code>字段作为<code class="highlighter-rouge">商品页数</code><br />
<code class="highlighter-rouge">order_goods</code>:添加<code class="highlighter-rouge">goods_url</code>字段作为<code class="highlighter-rouge">电子稿下载地址</code></p>

<h5 id="ecsproductyzldiy"><em>ecs_product_yzldiy</em>表</h5>

<p><code class="highlighter-rouge">product_yzldiy</code>:<code class="highlighter-rouge">pid</code>字段作为<code class="highlighter-rouge">模板编号</code><br />
<code class="highlighter-rouge">product_yzldiy</code>:<code class="highlighter-rouge">cid</code>字段作为<code class="highlighter-rouge">类别</code>:<code class="highlighter-rouge">product_category_yzldiy</code>表中的<code class="highlighter-rouge">id</code><br />
<code class="highlighter-rouge">product_yzldiy</code>:<code class="highlighter-rouge">preview</code>字段作为<code class="highlighter-rouge">预览图</code><br />
<code class="highlighter-rouge">product_yzldiy</code>:<code class="highlighter-rouge">mbDes</code>字段作为<code class="highlighter-rouge">模板描述</code><br />
<code class="highlighter-rouge">product_yzldiy</code>:<code class="highlighter-rouge">name</code>字段作为<code class="highlighter-rouge">模板名称</code><br />
<code class="highlighter-rouge">product_yzldiy</code>:<code class="highlighter-rouge">status</code>字段值为<code class="highlighter-rouge">1</code><br />
<code class="highlighter-rouge">product_yzldiy</code>:<code class="highlighter-rouge">tid</code>字段值为<code class="highlighter-rouge">00001</code></p>

<h5 id="ecsproductcategoryyzldiy"><em>ecs_product_category_yzldiy</em>表</h5>

<p><code class="highlighter-rouge">product_category_yzldiy</code>:<code class="highlighter-rouge">id</code>字段作为<code class="highlighter-rouge">模板类别编号</code><br />
<code class="highlighter-rouge">product_category_yzldiy</code>:<code class="highlighter-rouge">name</code>字段作为<code class="highlighter-rouge">模板类别名称</code><br />
<code class="highlighter-rouge">product_category_yzldiy</code>:<code class="highlighter-rouge">info</code>字段作为<code class="highlighter-rouge">类别说明</code></p>

<h5 id="ecsproductyzldiygallery"><em>ecs_product_yzldiy_gallery</em>表</h5>
<hr />

<p>新建<code class="highlighter-rouge">ecs_product_gallery</code>表<code class="highlighter-rouge">材质类型表</code></p>

<blockquote>
  <p>img_id:图片id<br />
pid：模板id:<code class="highlighter-rouge">ecs_product_yzldiy</code>中的<code class="highlighter-rouge">pid</code><br />
img_url：图片url</p>
</blockquote>

<h2 id="section-4">时间戳数据库处理</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>/* 添加按照付款时间每日分组 */
$group = " GROUP BY FROM_UNIXTIME(oi.pay_time,'%y-%m-%d')";

/* 查询距添加代理用户第几天 */
$sql = "SELECT TO_DAYS(FROM_UNIXTIME(oi.pay_time)) - TO_DAYS(FROM_UNIXTIME(au.add_time)) AS day_num, ";

/* 查询每日订单数 */
$sql = $sql . " COUNT(oi.order_id) AS order_sum_day, ";

/* 查询每日产品数 */
$sql = $sql . " COUNT(og.goods_id) AS product_sum_day ";
</code></pre>
</div>

<h2 id="section-5">参考资料</h2>

<p>[1]<a href="http://www.cnblogs.com/thinksasa/archive/2013/03/12/2955922.html">Ecshop安装过程中的的问题：cls_image::gd_version()和不支持JPEG</a><br />
[2]<a href="http://www.cnblogs.com/wallis0922/archive/2012/12/08/2808199.html">安装Ecshop首页出现报错：Only variables should be passed by referen</a></p>


        <div id="disqus_thread"></div>
        <script>
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//httpmoonseagithubio.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>

    <div class="sidenav">
        <h2>Blog</h2>
        <ul class="artical-list">
        
            <li><a href="/Analyse-Trojan">记一次木马的分析</a></li>
        
            <li><a href="/Build-Github-Pages">使用 Github 搭建自己的博客</a></li>
        
            <li><a href="/My-Fisrt-Blog">我的第一篇 Blog</a></li>
        
        </ul>

        <h2>Opinion</h2>
        <ul class="artical-list">
        
            <li><a href="/KCon-West">KCon West西部黑客大会</a></li>
        
            <li><a href="/Programming">Amazing Programming</a></li>
        
            <li><a href="/CDN-DDoS">基于CDN平台的DDoS攻击防护</a></li>
        
            <li><a href="/p7-bohara">Clustering Monitor Data</a></li>
        
            <li><a href="/Conferences">Coming Conferences and Activities</a></li>
        
            <li><a href="/English-Writing">English Writing</a></li>
        
            <li><a href="/Review-Survey">如何写一篇Survey的Review</a></li>
        
        </ul>

        <h2>Project</h2>
        <ul class="artical-list">
        
            <li><a href="/Baby">Baby 开发问题汇总</a></li>
        
            <li><a href="/Sports">Sports 开发问题汇总</a></li>
        
            <li><a href="/Ecshop-Problems">Ecshop 开发问题汇总</a></li>
        
            <li><a href="/Centos-Php">CentOs搭建Php开发环境</a></li>
        
            <li><a href="/Nodejs-P2pspider">p2pspider(读写文件和Mongodb版)</a></li>
        
            <li><a href="/CentOs-aria2">CentOs 安装多线程下载工具</a></li>
        
            <li><a href="/Wabacus-Problems">Wabacus 开发问题汇总</a></li>
        
        </ul>
    </div>
</div>

<script src="/js/post.js" type="text/javascript"></script>
<a id="scrollTop" href="javascript:scroll(0,0)">&#8657;</a>



    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').slideUp(100);
                }else{
                    $('.home-contact').slideDown(100);
                }
            });
        })
    </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-74981935-1', 'auto');
      ga('send', 'pageview');
    </script>

</body>
</html>
