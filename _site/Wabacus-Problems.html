<!DOCTYPE html>
<html>
<head>
    <!--
    * Author:         Moonsea
    -->
    <meta charset="utf-8" />
    <title>Wabacus 开发问题汇总 | Moonsea's Blog</title>
    <meta name="author" content="Moonsea" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Moonsea's Blog" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="https://help.github.com/assets/images/site/favicon.ico" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>

    <!-- mathjax config similar to math.stackexchange -->

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
          }
        });
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

    <script type="text/javascript"
       src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>


</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">Moonsea</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="https://github.com/moonsea/" target="_blank" style="margin-left:-5px;"><img src="https://www.icinga.org/wp-content/uploads/2014/07/github_logo.png" alt="" width="25"/></a>
            <a href="http://www.cnblogs.com/moonseazj/" target="_blank" style="margin-left:5px;"><img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQpVif04zTTXD3oM8ZSWaJUfxVoiZMb2C9gQQxpdq4AsRxOiU08" alt="" width="25"/></a>
            <a href="Mailto:seainsight@126.com" target="_blank" style="margin-left:5px;"><img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTgzheMdNlWeo7lx4-Tj95yGSJ9bHbSasD8A3BIiMFTutf2SasVaQ" alt="" width="25"/></a>
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/Wabacus-Problems" title="Wabacus 开发问题汇总">Wabacus 开发问题汇总</a></h1>
        <p class="entry-date">2016-03-14</p>
        <h2 id="section">写在前面</h2>

<p><a href="http://www.wabacus.org/">Wabacus</a>是目前我接触到的最方便进行进行办公系统，业务管理系统，适合多表单、表格的商务管理系统，同时还具备简单的图表展示，对数据处理、展示不是很复杂的系统也可以考虑使用。其基于Java 的 SSH 框架，在此基础上高度集成化，使用 XML 进行开发组织页面，开发人员可以在不熟悉或者会简单的 Java 编程，就可以迅速掌握并熟练使用的一个框架. 这个系统据学长说他和原作者保持着联系，不过我并没有见过.</p>

<p>这篇文章主要用来记录在开发过程中遇到的问题，以及相应的解决办法，所以本文不介绍如何使用 <a href="http://www.wabacus.org/">Wabacus</a> 系统，以及本地部署过程，具体的方法我会在另外一篇文章中介绍.其中很多问题可能仔细查看文档能够自己独立解决，因为现在正在使用 <a href="http://www.wabacus.org/">Wabacus</a> 进行开发，所以为了自己的方便，同时也方便和团队其他成员交流分享，所以大小问题都会记录下来，每个问题单独一个小节，有相似问题的可以直接跳到相关部分.</p>

<h2 id="section-1">固定前2列</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;report id="epd601_report1" title="" type="editablelist2" 
dataexport="richexcel" align="center" scrollwidth="1000px" width="1200px" 
scrollheight="200px" fixedcols="2" fixedrows="title" rowselect="single"&gt;
...
&lt;/report&gt;
</code></pre>
</div>

<p>其中<code class="highlighter-rouge">fixedcols="2" fixedrows="title"</code>表示固定标签的前<code class="highlighter-rouge">2</code>列，同时固定每列的<code class="highlighter-rouge">title</code>，当然这两个标签不是必须同时使用的.效果如下：
<img src="/images/WabacusProblems/fixcol2.jpg" alt="Fixcol2" /></p>

<h2 id="section-2">单选1行</h2>

<p>需求：鼠标点击表格中的记录，只能选择一行</p>

<p>方案：<code class="highlighter-rouge">&lt;report rowselect="single&gt;</code></p>

<h2 id="section-3">查询条件输入框中显示默认值</h2>

<p>一般来说，输入框<code class="highlighter-rouge">inputbox</code>都会提供一个标签<code class="highlighter-rouge">defaultvalue</code>，当然<a href="http://www.wabacus.org/">Wabacus</a>也不例外，但是在查询条件中设置<code class="highlighter-rouge">defaultvalue</code>，却不会在页面中显示出来，而且在后台查询时也不会作为查询条件的默认值进入查询的<code class="highlighter-rouge">sql</code>语句，但是页面数据<code class="highlighter-rouge">&lt;col&gt;&lt;/col&gt;</code>中<code class="highlighter-rouge">&lt;inputbox&gt;&lt;/inputbox&gt;</code>使用<code class="highlighter-rouge">defaultvalue</code>能够在页面中显示出来，并作为其默认值。所以需要采取一种新的方法来实现查询条件输入框在页面中显示默认值.</p>

<p>需求：查询条件输入框在页面中显示当前日期<br />
方案：使用<code class="highlighter-rouge">doStart()</code>拦截器，格式化当前日期，并对页面查询条件输入框赋值</p>

<div class="highlighter-rouge"><pre class="highlight"><code>public void doStart(ReportRequest rrequest, ReportBean rbean) {

    Format dateFormat = new SimpleDateFormat("yyyy/MM/dd");
    long currentTime = System.currentTimeMillis();
    Date da = new Date(currentTime);

    String date_s = rrequest.getStringAttribute("date_s");
    if(date_s == null || date_s.equals(""))
        rrequest.setAttribute("date_s", dateFormat.format(da));
    String date_e = rrequest.getStringAttribute("date_e");
    if(date_e == null || date_e.equals(""))
        rrequest.setAttribute("date_e", dateFormat.format(da));

}
</code></pre>
</div>

<p>在本段代码中，</p>

<ul>
  <li><code class="highlighter-rouge">3-5</code>行：格式化当前日期</li>
  <li><code class="highlighter-rouge">7-9</code>行：获取页面查询条件<code class="highlighter-rouge">date_s</code>输入框的值，如果有数据，则不添加默认值，没有数据，添加默认值.</li>
  <li><code class="highlighter-rouge">10-12</code>行：获取页面查询条件<code class="highlighter-rouge">date_e</code>输入框的值，如果有数据，则不添加默认值，没有数据，添加默认值.</li>
  <li><code class="highlighter-rouge">date_s</code>,<code class="highlighter-rouge">date_e</code>是页面查询条件输入框的<code class="highlighter-rouge">name</code>,例如：<code class="highlighter-rouge">&lt;condition name="date_s" label="开始日期:" labelposition="left" right="30" br="true"&gt;</code></li>
  <li><code class="highlighter-rouge">doStart()</code>在每次查询后会重新加载，如果<code class="highlighter-rouge">7,10</code>不加入判断，那么用户输入无效，输入框的<code class="highlighter-rouge">value</code>一直是<code class="highlighter-rouge">9,12</code>所赋值</li>
</ul>

<p>最终实现效果如下：
<img src="/images/WabacusProblems/conditiondefaultvalue.jpg" alt="conditiondefaultvalue" /></p>

<h2 id="section-4">固定列宽</h2>

<p>需求：固定页面数据中每列显示数据的宽度<br />
方案：<code class="highlighter-rouge">&lt;col column="actual_hours" label="实动工时" width="100px"&gt;&lt;/col&gt;</code></p>

<p>效果如下：
<img src="/images/WabacusProblems/colwidth.jpg" alt="colwidth" /></p>

<hr />
<p><code class="highlighter-rouge">2016-04-02</code></p>

<h2 id="stream-closed">开发环境Stream Closed</h2>

<p>在初始搭建Wabacus项目开发环境时，需要配置好本地环境<code class="highlighter-rouge">Tomcat 7</code>和<code class="highlighter-rouge">Java 1.7</code>,但是只有这些还是不够，因为在运行程序的时候，会发现系统报错，提示<code class="highlighter-rouge">Stream Closed</code>,具体原因不知道，可能是因为导入依赖包时，系统无法完全识别，所以需要重新导入.</p>

<p>问题：系统运行报错<code class="highlighter-rouge">Stram Closed</code>
方案：项目配置中重新导入资源依赖包</p>

<p>首先，选择项目点击右键，选择”打开模块设置”(Open Module Settings)
<img src="/images/WabacusProblems/16-04-02-1-open-module-settings.jpg" alt="Open-Module-Settings" /></p>

<p>然后，选择“模块”(Modules)
<img src="/images/WabacusProblems/16-04-02-2-module.JPG" alt="Module" /></p>

<p>在右侧区域选择“依赖”(Denpencies)
<img src="/images/WabacusProblems/16-04-02-3-depencies.JPG" alt="Denpencies" /></p>

<p>最后把下面的依赖包全部删除，只留下Java本地资源包，然后重新导入系统资源依赖包.资源依赖包的路径是<code class="highlighter-rouge">/WebRoot/WEB-INF/lib</code>,把全部<code class="highlighter-rouge">jar</code>包重新导入就可以了.
<img src="/images/WabacusProblems/16-04-02-4-add-jars.JPG" alt="Add-Jars" /></p>

<h2 id="section-5">致谢</h2>

<p>感谢Adam的热心帮助</p>


        <div id="disqus_thread"></div>
        <script>
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//httpmoonseagithubio.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>

    <div class="sidenav">
        <h2>Blog</h2>
        <ul class="artical-list">
        
            <li><a href="/Build-Github-Pages">使用 Github 搭建自己的博客</a></li>
        
            <li><a href="/My-Fisrt-Blog">我的第一篇 Blog</a></li>
        
        </ul>

        <h2>Opinion</h2>
        <ul class="artical-list">
        
            <li><a href="/Programming">Amazing Programming</a></li>
        
            <li><a href="/CDN-DDoS">基于CDN平台的DDoS攻击防护</a></li>
        
            <li><a href="/p7-bohara">Clustering Monitor Data</a></li>
        
            <li><a href="/Conferences">Coming Conferences and Activities</a></li>
        
            <li><a href="/English-Writing">English Writing</a></li>
        
            <li><a href="/Review-Survey">如何写一篇Survey的Review</a></li>
        
        </ul>

        <h2>Project</h2>
        <ul class="artical-list">
        
            <li><a href="/Sports">Sports 开发问题汇总</a></li>
        
            <li><a href="/Ecshop-Problems">Ecshop 开发问题汇总</a></li>
        
            <li><a href="/Centos-Php">CentOs搭建Php开发环境</a></li>
        
            <li><a href="/Nodejs-P2pspider">p2pspider(读写文件和Mongodb版)</a></li>
        
            <li><a href="/CentOs-aria2">CentOs 安装多线程下载工具</a></li>
        
            <li><a href="/Wabacus-Problems">Wabacus 开发问题汇总</a></li>
        
        </ul>
    </div>
</div>

<script src="/js/post.js" type="text/javascript"></script>
<a id="scrollTop" href="javascript:scroll(0,0)">&#8657;</a>



    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').slideUp(100);
                }else{
                    $('.home-contact').slideDown(100);
                }
            });
        })
    </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-74981935-1', 'auto');
      ga('send', 'pageview');
    </script>

</body>
</html>
